# rdr on en0 inet proto tcp to any port 80 -> 127.0.0.1 port 8080
# rdr on en0 inet proto tcp to any port 443 -> 127.0.0.1 port 8080
# rdr pass on lo0 inet proto tcp from any to any port 80 -> 127.0.0.1 port 8080
# rdr pass on en0 inet proto tcp from any to any port 80 -> 127.0.0.1 port 8080
# rdr pass on en8 inet proto tcp from any to any port 80 -> 127.0.0.1 port 8080

# Second redirect now incoming traffic to localhost 8080 for all traffic that matches our host and port filter
rdr on lo0 proto tcp from en0 to any port { 80, 443 } -> 127.0.0.1 port 8080
# rdr on en8 proto tcp from en0 to any port { 80, 443 } -> 127.0.0.1 port 8080

# First route all outgoing traffic from en0 to lo0 that matches our host and port filter and user
pass out on en0 route-to lo0 proto tcp from en0 to any port { 80, 443 } keep state
# pass out on en8 route-to lo0 proto tcp from en8 to any port { 80, 443 } keep state

# rdr pass on lo0 inet proto tcp from any to any port 80 -> 127.0.0.2 port 8080

# rdr pass inet proto tcp from any to any port 80 -> 127.0.0.1 port 8080
